\begin{tikzpicture}
\pgfmathsetmacro{\XMD}{2.3}
\pgfmathsetmacro{\YMD}{1.3}
\pgfmathsetmacro{\XTD}{2.8}
\pgfmathsetmacro{\YTD}{1.8}

\tikzset{
  memory/.style={draw, rectangle, on grid, align=center, minimum height=4ex},
  thread/.style={draw, circle, on grid, align=center, minimum height=4ex},
}
\node[memory] (sm) at (0, 0)
{\figfont{共享内存}};

\node [thread]  (p1) at ($(sm.north) + (0, \YTD)$) {\figfont{线程}};
\node [memory]  (m1) at ($(p1.west) + (\XMD, 0)$) {\figfont{私有内存}};

\node [thread]  (p2) at ($(sm.west) + (\XTD, 0)$) {\figfont{线程}};
\node [memory]  (m2) at ($(p2.south) + (0, -\YMD)$) {\figfont{私有内存}};

\node [thread]  (p3) at ($(sm.south) + (0, -\YTD)$) {\figfont{线程}};
\node [memory]  (m3) at ($(p3.east) + (-\XMD, 0)$) {\figfont{私有内存}};

\node [thread]  (p4) at ($(sm.east) + (-\XTD, 0)$) {\figfont{线程}};
\node [memory]  (m4) at ($(p4.north) + (0, \YMD)$) {\figfont{私有内存}};

\draw [<-] (sm.north) -- (p1.south);
\draw [->] (p1.east) -- (m1.west);

\draw [<-] (sm.west) -- (p4.east);
\draw [->] (p4.north) -- (m4.south);

\draw [<-] (sm.south) -- (p3.north);
\draw [->] (p3.west) -- (m3.east);

\draw [<-] (sm.east) -- (p2.west);
\draw [->] (p2.south) -- (m2.north);
\end{tikzpicture}
